(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[140],{672:function(e,s,r){Promise.resolve().then(r.bind(r,8307))},8307:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return p}});var a=r(7437),t=r(605),n=r(2265),i=r(3287),o=r(2660),d=r(2369),l=r(6337),c=r(3229),m=r(6070),u=r(2869),f=r(5186),h=r(6815),x=r(9376),w=r(6275);function p(){let{data:e}=(0,t.useSession)(),s=(0,x.useRouter)(),[r,p]=(0,n.useState)(!1),[g,b]=(0,n.useState)({name:"",email:"",currentPassword:"",newPassword:"",confirmPassword:""});(0,n.useEffect)(()=>{e?.user?b(s=>({...s,name:e.user?.name||"",email:e.user?.email||""})):s.push("/auth/signin")},[e,s]);let N=async e=>{if(e.preventDefault(),g.newPassword&&g.newPassword!==g.confirmPassword){w.ZP.error("New passwords do not match");return}if(g.newPassword&&g.newPassword.length<6){w.ZP.error("New password must be at least 6 characters long");return}if(g.newPassword&&!g.currentPassword){w.ZP.error("Current password is required to change password");return}p(!0);try{console.log("Submitting form data:",{name:g.name,hasCurrentPassword:!!g.currentPassword,hasNewPassword:!!g.newPassword});let e=await fetch("/api/admin/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:g.name,currentPassword:g.currentPassword,newPassword:g.newPassword})}),s=await e.json();if(console.log("Response data:",s),e.ok&&s.success){let e=s.message||"Profile updated successfully";w.ZP.success(e),console.log("Success:",e),b(e=>({...e,currentPassword:"",newPassword:"",confirmPassword:""}))}else{let r=s.error||`Failed to update profile (${e.status})`;w.ZP.error(r),console.error("Update failed:",r,s)}}catch(e){console.error("Error updating profile:",e),w.ZP.error("Network error: Failed to update profile")}finally{p(!1)}},v=e=>{b({...g,[e.target.name]:e.target.value})};return void 0===e?(0,a.jsx)("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Loading..."})]})}):e?(0,a.jsx)("div",{className:"min-h-screen bg-slate-900",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)(u.z,{variant:"ghost",onClick:()=>s.back(),className:"text-white hover:bg-slate-800 mb-4",children:[(0,a.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Admin Settings"}),(0,a.jsx)("p",{className:"text-slate-400 mt-2",children:"Manage your admin profile and preferences"})]}),(0,a.jsx)("div",{className:"grid gap-6",children:(0,a.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,a.jsxs)(m.Zb,{className:"bg-slate-800 border-slate-700",children:[(0,a.jsx)(m.Ol,{children:(0,a.jsxs)(m.ll,{className:"text-white flex items-center",children:[(0,a.jsx)(d.Z,{className:"mr-2 h-5 w-5"}),"Profile Information"]})}),(0,a.jsx)(m.aY,{children:(0,a.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h._,{htmlFor:"name",className:"text-white",children:"Name"}),(0,a.jsx)(f.I,{id:"name",name:"name",type:"text",value:g.name,onChange:v,className:"bg-slate-700 border-slate-600 text-white",placeholder:"Your name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h._,{htmlFor:"email",className:"text-white",children:"Email"}),(0,a.jsx)(f.I,{id:"email",name:"email",type:"email",value:g.email,onChange:v,className:"bg-slate-700 border-slate-600 text-white",placeholder:"Your email",disabled:!0})]})]}),(0,a.jsxs)("div",{className:"border-t border-slate-700 pt-4 mt-6",children:[(0,a.jsxs)("h3",{className:"text-white font-semibold mb-4 flex items-center",children:[(0,a.jsx)(l.Z,{className:"mr-2 h-4 w-4"}),"Change Password"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h._,{htmlFor:"currentPassword",className:"text-white",children:"Current Password"}),(0,a.jsx)(f.I,{id:"currentPassword",name:"currentPassword",type:"password",value:g.currentPassword,onChange:v,className:"bg-slate-700 border-slate-600 text-white",placeholder:"Current password"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h._,{htmlFor:"newPassword",className:"text-white",children:"New Password"}),(0,a.jsx)(f.I,{id:"newPassword",name:"newPassword",type:"password",value:g.newPassword,onChange:v,className:"bg-slate-700 border-slate-600 text-white",placeholder:"New password"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h._,{htmlFor:"confirmPassword",className:"text-white",children:"Confirm Password"}),(0,a.jsx)(f.I,{id:"confirmPassword",name:"confirmPassword",type:"password",value:g.confirmPassword,onChange:v,className:"bg-slate-700 border-slate-600 text-white",placeholder:"Confirm password"})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end pt-4",children:(0,a.jsx)(u.z,{type:"submit",disabled:r,className:"bg-blue-600 hover:bg-blue-700 text-white",children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})})]})})]})})})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white mb-4",children:"Authentication Required"}),(0,a.jsx)("p",{className:"text-gray-400 mb-6",children:"Please sign in to access admin settings."})]})})}},2869:function(e,s,r){"use strict";r.d(s,{z:function(){return l}});var a=r(7437),t=r(2265),n=r(7053),i=r(7712),o=r(4508);let d=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=t.forwardRef(({className:e,variant:s,size:r,asChild:t=!1,...i},l)=>{let c=t?n.g7:"button";return(0,a.jsx)(c,{className:(0,o.cn)(d({variant:s,size:r,className:e})),ref:l,...i})});l.displayName="Button"},6070:function(e,s,r){"use strict";r.d(s,{Ol:function(){return o},Zb:function(){return i},aY:function(){return l},ll:function(){return d}});var a=r(7437),t=r(2265),n=r(4508);let i=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let o=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...s}));o.displayName="CardHeader";let d=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));d.displayName="CardTitle",t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...s})).displayName="CardDescription";let l=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...s}));l.displayName="CardContent",t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},5186:function(e,s,r){"use strict";r.d(s,{I:function(){return i}});var a=r(7437),t=r(2265),n=r(4508);let i=t.forwardRef(({className:e,type:s,...r},t)=>(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...r}));i.displayName="Input"},6815:function(e,s,r){"use strict";r.d(s,{_:function(){return l}});var a=r(7437),t=r(2265),n=r(6394),i=r(7712),o=r(4508);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)(n.f,{ref:r,className:(0,o.cn)(d(),e),...s}));l.displayName=n.f.displayName},4508:function(e,s,r){"use strict";r.d(s,{cn:function(){return n}});var a=r(1994),t=r(3335);function n(...e){return(0,t.m6)((0,a.W)(e))}}},function(e){e.O(0,[910,605,457,971,117,744],function(){return e(e.s=672)}),_N_E=e.O()}]);